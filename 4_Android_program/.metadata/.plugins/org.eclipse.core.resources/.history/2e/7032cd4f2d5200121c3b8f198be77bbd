import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;


public class AirServer 
{
	public  void main(String[] args) throws Exception 
	{
		getImage();
	}
	
	
	public byte[] readStream( InputStream in_stream ) throws Exception 
	{
		ByteArrayOutputStream out_stream = new ByteArrayOutputStream();
		byte[] buffer = new byte[1024];
		int length = 1;
		while( (length = in_stream.read( buffer ) )!=-1 )
		{
			out_stream.write( buffer, 0, length );
		}
		out_stream.close();
		in_stream.close();
		return out_stream.toByteArray();
		
	}
	
	public void getImage() throws Exception
	{
		String ImagePath = "http://imgsrc.baidu.com/forum/pic/item/7318deaa8992a8730ff4778e.jpg";
		URL url = new URL(ImagePath);
		HttpURLConnection connection = (HttpURLConnection ) url.openConnection();
		connection.setReadTimeout(6*1000);
		connection.setRequestMethod("GET");
		System.out.println( connection.getResponseCode());
		if( connection.getResponseCode() == 200 )
		{
			InputStream input_stream = connection.getInputStream();
			byte[] data = readStream(input_stream );
			File file = new File("haha.jpg");
			FileOutputStream output_stream = new FileOutputStream( file);
			output_stream.write( data );
			output_stream.close();
			
		}
	}
	
	
}




