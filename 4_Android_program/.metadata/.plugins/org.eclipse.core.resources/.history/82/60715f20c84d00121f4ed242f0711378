package com.example.airsync;

import com.example.airsync.Main.PictureButtonListener;

import TestSensor.tusion.TestSensorActivity;
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
/* 建立一个gallery显示SD卡里的照片*/
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;


public class ShowPicture extends Activity 
{
	private TextView tvShowPicture;
	
	@Override
	protected void onCreate(Bundle savedInstanceState) 
	{
		super.onCreate(savedInstanceState);
		/*载入主界面的各个控件格式*/
		setContentView(R.layout.activity_showpicture);
		
		/* 建立一个gallery显示SD卡里的照片*/
		Gallery gallery = (Gallery)findViewById( R.id.my_gallery);
		gallery.setAdapter( new ImageAdapter( this));
		gallery.setOnItemClickListener( (android.widget.AdapterView.OnItemClickListener) new  OnItemClickListener());
		
		//gallery.setAdapter( new ImageAdapter( this, GetSDPicture()));
		//gallery.setOnItemClickListener( new GalleryClickListener())
		
		tvShowPicture = (TextView) findViewById(R.id.show_picture_text);
		tvShowPicture.setText("好吧，我饿了，就做到这里了");
		
	}

}

class OnItemClickListener implements OnClickListener{

	public void onItemClick
	( AdapterView<?> parent, View v, int position, long id )
	{
		// TODO Auto-generated method stub

		Toast.makeText(ShowPicture.this, "有图片了", Toast.LENGTH_SHORT).show();
		
		
	}

	@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		
	}
	
	
}

class ImageAdapter extends BaseAdapter
{
	int mGalleryItemBackground;
	private Context mContext;
	
	public ImageAdapter( Context c )
	{
		mContext = c;
		
		TypedArray a = mContext.obtainStyledAttributes(R.styleable.Gallery);
		mGalleryItemBackground = a.getResourceId(R.styleable.Gallery_android_galleryItemBackground, 0);
		a.recycle();
	}
	
	/*返回照片数目*/
	@Override
	public int getCount() {
		// TODO Auto-generated method stub
		return myImageIds.length;
	}
	/*返回图像数组的id*/
	@Override
	public Object getItem(int position) {
		// TODO Auto-generated method stub
		return position;
	}
	@Override
	public long getItemId(int position) {
		// TODO Auto-generated method stub
		return position;
	}
	
	@Override
	public View getView(int position, View convertView, ViewGroup parent) {
		// TODO Auto-generated method stub
		ImageView i = new ImageView( mContext );
		//设置图片给image对象
		i.setImageResource( myImageIds[position]);
		//设置图片的高和宽
		i.setScaleType( ImageView.ScaleType.FIT_XY );
		//设置Layout的高和宽
		i.setLayoutParams( new Gallery.LayoutParams( 136, 88));
		//设置gallery的背景
		i.setBackgroundResource( mGalleryItemBackground );
		
		return i;
	}
	
	/*构建一个Iteger array，去的预先需要加载的Drawable文件夹内的图片ID */
	private Integer[] myImageIds = 
		{ 
				R.drawable.photo1,
				R.drawable.photo2, 
				R.drawable.photo3, 
				R.drawable.photo4, 
				R.drawable.photo5, 
				R.drawable.photo6, 
		};
		
}

/*为按钮创建监听器*/
/*
class GalleryClickListener implements OnClickListener{

	@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		
	}
}
*/
/*将SD卡指定文件夹的照片路径存在一个List中，好让相册控件显示
 * 这个照片目录是从aircard穿过来的照片存储的地方
 * 现在实验的时候我放在：/mnt/extsd/TestPhoto
 */

//private List<String> GetSDPicture()
//{
//	;
//}



