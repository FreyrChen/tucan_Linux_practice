package com.example.airsync;

import java.io.File;
import java.text.DecimalFormat;

import android.os.Environment;
import android.os.StatFs;

public class SDCard {

	/*取得SD卡现在的容量*/
	private String ShowSize()
	{
		if( Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
		{
			//取得SD卡路径
			File path = Environment.getExternalStorageDirectory();
			
			StatFs stat_fs = new StatFs( path.getPath() );
			
			long block_size = stat_fs.getBlockSize();
			long total_blocks = stat_fs.getBlockCount();
			long available_blocks = stat_fs.getAvailableBlocks();
			
			String total = FileSize( total_blocks * block_size );
			String available = FileSize( available_blocks * block_size );
			
			return available;
		}
	}
	
	/*返回SD卡容量的字符串，单位MB*/
	private String FileSize( long size )
	{
		String str="";
		if( size / 1024 >= 0 )
		{
			str = "MB";
			size /= 1024;
		}
		DecimalFormat formatter = new DecimalFormat();
		//3位分别，如，000
		formatter.setGroupingSize(3);
		return formatter.format(size);
	}
}
